@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg-base: 250 250 250;
  --bg-card: 255 255 255;
  --text-primary: 23 23 23;
  --text-muted: 115 115 115;
  --border: 229 229 229;
  --accent: 59 130 246;
}

.dark {
  --bg-base: 9 9 11;     /* zinc-950 */
  --bg-card: 39 39 42;   /* zinc-800 */
  --text-primary: 250 250 250;
  --text-muted: 161 161 170;
  --border: 63 63 70;
  --accent: 59 130 246;
}

body {
  @apply antialiased font-sans;
  background-color: rgb(var(--bg-base));
  color: rgb(var(--text-primary));
}

/* Glassmorphism – dark zinc with subtle blue tint */
.glass {
  @apply bg-white/70 dark:bg-zinc-900/80 backdrop-blur-xl border border-zinc-200/50 dark:border-zinc-700/50 dark:border-blue-950/40;
}

.glass-card {
  @apply bg-white/80 dark:bg-zinc-800/90 backdrop-blur-xl border border-zinc-200/60 dark:border-zinc-700/50 dark:border-blue-950/30 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20 dark:shadow-blue-950/10;
}

/* Subtle scrollbar for component palette – thin, low contrast */
.scrollbar-palette {
  scrollbar-width: thin;
  scrollbar-color: rgb(113 113 122 / 0.4) transparent;
}

.scrollbar-palette::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-palette::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-palette::-webkit-scrollbar-thumb {
  background: rgb(113 113 122 / 0.35);
  border-radius: 3px;
}

.scrollbar-palette::-webkit-scrollbar-thumb:hover {
  background: rgb(113 113 122 / 0.5);
}

/* Native select: hide browser arrow, add custom chevron 16px from right */
.select-arrow-padded {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-repeat: no-repeat;
  background-size: 1rem 1rem;
  background-position: right 16px center;
  padding-right: 2.75rem; /* 44px: icon + 16px gap from right edge */
}

.select-arrow-padded {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2371717a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
}

.dark .select-arrow-padded {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23a1a1aa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
}

/* Split layout form panel – always white (ignores dark mode) */
.split-form-panel {
  background-color: rgb(255 255 255) !important;
}

/* Clipped image – Corner Inverter shape (inverted corners at top-left and bottom-right) */
.clipped-image {
  clip-path: url(#corner-inverter-shape);
  -webkit-clip-path: url(#corner-inverter-shape);
  object-fit: cover;
}

/* Form builder & preview light mode */
.form-builder-light,
.form-preview-light {
  background-color: rgb(255 255 255) !important;
}
.form-builder-light .glass-card,
.form-preview-light .glass-card {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(229 231 235) !important;
}

/* Form fill – accessible focus states & section contrast */
.form-fill input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):focus,
.form-fill textarea:focus,
.form-fill select:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(59 130 246, 0.35);
}
.form-fill input.border-red-500:focus,
.form-fill textarea.border-red-500:focus,
.form-fill select.border-red-500:focus {
  box-shadow: 0 0 0 2px rgba(239 68 68, 0.35);
}
.form-fill .form-fill-section-title {
  color: rgb(17 24 39) !important;
  font-weight: 600;
  font-size: 1.0625rem;
  letter-spacing: -0.02em;
}
.dark .form-fill .form-fill-section-title {
  color: rgb(250 250 250) !important;
}
.form-preview-light .form-fill .form-fill-section-title {
  color: rgb(15 23 42) !important; /* slate-900 – strong contrast on white */
}
/* Section divider – layout-specific (split gets lighter; default/header-cover get standard) */
.form-fill-layout-split .form-fill div:has(> .form-fill-section-title) {
  border-top-color: rgb(244 244 245 / 0.6) !important; /* zinc-100 at 60% – split only */
}
.form-preview-light .form-fill-layout-default .form-fill div:has(> .form-fill-section-title),
.form-preview-light .form-fill-layout-header-cover .form-fill div:has(> .form-fill-section-title),
.form-builder-light .form-fill-layout-default .form-fill div:has(> .form-fill-section-title),
.form-builder-light .form-fill-layout-header-cover .form-fill div:has(> .form-fill-section-title) {
  border-top-color: rgb(228 228 231) !important; /* zinc-200 – default/header in preview */
}
.form-fill .form-fill-section-desc {
  color: rgb(75 85 99) !important;
}
.dark .form-fill .form-fill-section-desc {
  color: rgb(161 161 170) !important;
}
.form-fill button[type="submit"]:focus-visible,
.form-fill button[type="button"]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(59 130 246, 0.5);
}

/* Form fill – stepper & title */
.form-fill-stepper-dot {
  width: 1.75rem;
  height: 1.75rem;
  min-width: 1.75rem;
  min-height: 1.75rem;
  flex-shrink: 0;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s;
}
.form-fill-stepper-dot-active {
  background: rgb(59 130 246);
  color: white;
  box-shadow: 0 2px 8px rgba(59 130 246, 0.35);
}
.form-fill-stepper-dot-completed {
  background: rgb(59 130 246);
  color: white;
}
.form-fill-stepper-dot-upcoming {
  background: rgb(250 250 250);
  color: rgb(163 163 163);
  border: 1px solid rgb(228 228 231);
}
.dark .form-fill-stepper-dot-upcoming {
  background: rgb(39 39 42);
  color: rgb(161 161 170);
  border-color: rgb(63 63 70);
}
/* Form preview/builder – force light mode stepper (ignore dark mode) */
.form-preview-light .form-fill-stepper-dot-upcoming,
.form-builder-light .form-fill-stepper-dot-upcoming {
  background: rgb(250 250 250) !important;
  color: rgb(163 163 163) !important;
  border-color: rgb(228 228 231) !important;
}
.form-preview-light .form-fill-stepper-connector,
.form-builder-light .form-fill-stepper-connector {
  background-color: rgb(243 244 246) !important;
}
.form-preview-light .form-fill-stepper-connector.form-fill-stepper-connector-done,
.form-builder-light .form-fill-stepper-connector.form-fill-stepper-connector-done {
  background-color: rgb(96 165 250) !important;
}
.form-preview-light .form-fill-stepper-label,
.form-builder-light .form-fill-stepper-label {
  color: inherit;
}
.form-preview-light .form-fill-stepper .text-zinc-500,
.form-builder-light .form-fill-stepper .text-zinc-500 {
  color: rgb(107 114 128) !important;
}
.form-preview-light .form-fill-stepper .text-zinc-400,
.form-builder-light .form-fill-stepper .text-zinc-400 {
  color: rgb(156 163 175) !important;
}

/* Previous button – accessible contrast in form preview */
.form-preview-light .form-fill-prev-btn,
.form-builder-light .form-fill-prev-btn {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(203 213 225) !important;
  color: rgb(51 65 85) !important;
}
.form-preview-light .form-fill-prev-btn:hover,
.form-builder-light .form-fill-prev-btn:hover {
  background-color: rgb(248 250 252) !important;
  border-color: rgb(148 163 184) !important;
}
.form-preview-light .form-fill-prev-btn:focus-visible,
.form-builder-light .form-fill-prev-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px white, 0 0 0 4px rgb(59 130 246) !important;
}
.form-fill-title {
  font-size: clamp(1.125rem, 4vw, 1.5rem);
  font-weight: 600;
  color: rgb(17 24 39);
  letter-spacing: -0.025em;
  line-height: 1.3;
}
.dark .form-fill-title {
  color: rgb(250 250 250);
}
.form-preview-light .form-fill-title {
  color: rgb(15 23 42) !important;
}
.form-fill-desc {
  font-size: 0.9375rem;
  color: rgb(75 85 99);
  line-height: 1.5;
}
.dark .form-fill-desc {
  color: rgb(161 161 170);
}

/* File input wrapper – matches text inputs (white bg, light border) */
.form-fill .form-fill-file-wrapper {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  min-height: 2.75rem;
  transition: border-color 0.15s, box-shadow 0.15s;
  border: 1px solid rgb(209 213 219);
  border-radius: 0.5rem;
  background: white;
}
.form-fill .form-fill-file-wrapper:focus-within {
  outline: none;
  box-shadow: 0 0 0 2px rgba(59 130 246, 0.25);
  border-color: rgb(59 130 246) !important;
}
.form-preview-light .form-fill .form-fill-file-wrapper {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(209 213 219) !important;
}
.form-fill .form-fill-file-btn {
  padding: 0;
  font-size: 0.875rem;
  font-weight: 500;
  color: rgb(59 130 246);
  background: transparent;
  border: none;
  cursor: pointer;
  flex-shrink: 0;
}
.form-fill .form-fill-file-btn:hover {
  text-decoration: underline;
}
.dark .form-fill .form-fill-file-wrapper {
  background: rgb(39 39 42);
  border-color: rgb(63 63 70);
}
.dark .form-fill .form-fill-file-btn {
  color: rgb(96 165 250);
}
.form-fill .form-fill-file-text {
  font-size: 0.875rem;
  color: rgb(107 114 128);
}
.dark .form-fill .form-fill-file-text {
  color: rgb(161 161 170);
}

/* Form fill/preview – light mode overrides (title, labels, inputs) */
.form-preview-light h2 {
  color: rgb(24 24 27) !important; /* zinc-900 – form title */
}
.form-preview-light h2 + p {
  color: rgb(75 85 99) !important; /* gray-600 – form description */
}
.form-preview-light label {
  color: rgb(55 65 81) !important; /* gray-700 – field labels */
}

.form-preview-light input:not([type="checkbox"]):not([type="radio"]):not([type="file"]),
.form-preview-light textarea,
.form-preview-light select {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(209 213 219) !important;
  color: rgb(17 24 39) !important;
}
.form-preview-light input::placeholder,
.form-preview-light textarea::placeholder {
  color: rgb(107 114 128) !important;
}
.form-preview-light input[type="file"] {
  background-color: transparent !important;
}
.form-preview-light input[type="file"]::file-selector-button {
  background-color: rgb(249 250 251) !important;
  border: 1px solid rgb(209 213 219) !important;
  color: rgb(55 65 81) !important;
}

/* Form builder – title, palette, search, components (light mode styling) */
.form-builder-light .form-builder-title {
  color: rgb(24 24 27) !important; /* zinc-900 */
}
.form-builder-light .form-builder-desc {
  color: rgb(113 113 122) !important; /* zinc-500 */
}
.form-builder-light .form-builder-palette .form-builder-search {
  background-color: rgb(255 255 255) !important;
  border: 1px solid rgb(228 228 231) !important; /* zinc-200 */
  color: rgb(24 24 27) !important;
}
.form-builder-light .form-builder-palette .form-builder-search::placeholder {
  color: rgb(161 161 170) !important; /* zinc-400 */
}
.form-builder-light .form-builder-palette .form-builder-search-icon {
  color: rgb(161 161 170) !important; /* zinc-400 */
}
.form-builder-light .form-builder-section-label {
  color: rgb(24 24 27) !important; /* zinc-900 – darker for headers */
}
.form-builder-light .form-builder-form-title {
  color: rgb(24 24 27) !important;
}
.form-builder-light .form-builder-form-title::placeholder {
  color: rgb(82 82 91) !important; /* zinc-600 – darker placeholder */
}
.form-builder-light .form-builder-form-desc {
  color: rgb(75 85 99) !important; /* gray-600 */
}
.form-builder-light .form-builder-canvas [class*="border-dashed"] {
  border-color: rgb(209 213 219) !important;
}
.form-builder-light .form-builder-canvas [class*="border-zinc-200"],
.form-builder-light .form-builder-canvas [class*="border-zinc-600"] {
  border-color: rgb(229 231 235) !important;
}
.form-builder-light .form-builder-canvas [class*="hover:border-zinc"]:hover {
  border-color: rgb(209 213 219) !important;
}
.form-builder-light .form-builder-canvas [class*="bg-blue-500/10"] {
  background-color: rgb(239 246 255) !important;
}
.form-builder-light .form-builder-canvas .text-zinc-500,
.form-builder-light .form-builder-canvas .text-zinc-400 {
  color: rgb(75 85 99) !important;
}
.form-builder-light .form-builder-palette .form-builder-component-btn {
  background-color: rgb(255 255 255) !important;
  border: 1px solid rgb(228 228 231) !important; /* subtle light grey like image 2 */
  color: rgb(39 39 42) !important; /* zinc-800 */
}
.form-builder-light .form-builder-palette .form-builder-component-btn:not(.opacity-60):hover {
  background-color: rgb(249 250 251) !important; /* zinc-50 */
}
.form-builder-light .form-builder-palette .form-builder-component-icon {
  color: rgb(59 130 246) !important; /* blue-500 */
}
.form-builder-light .form-builder-palette .form-builder-component-label {
  color: rgb(24 24 27) !important; /* zinc-900 – darker */
}

/* Form builder – Images panel & palette tabs (light mode) */
.form-builder-light .form-builder-palette-tabs {
  background-color: rgb(229 229 231 / 0.8) !important; /* zinc-200 */
}
.form-builder-light .form-builder-palette-tab-active {
  background-color: rgb(255 255 255) !important;
  color: rgb(24 24 27) !important;
}
.form-builder-light .form-builder-palette-tab-inactive {
  color: rgb(82 82 91) !important; /* zinc-600 */
}
.form-builder-light .form-builder-palette-tab-inactive:hover {
  color: rgb(24 24 27) !important;
  background-color: rgb(255 255 255 / 0.6) !important;
}
.form-builder-light .form-builder-images-panel .form-builder-images-input,
.form-builder-light .form-builder-images-panel input {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(212 212 216) !important; /* zinc-300 */
  color: rgb(24 24 27) !important;
}
.form-builder-light .form-builder-images-panel input::placeholder {
  color: rgb(113 113 122) !important; /* zinc-500 */
}
.form-builder-light .form-builder-images-panel p.text-zinc-500,
.form-builder-light .form-builder-images-panel .text-zinc-500 {
  color: rgb(113 113 122) !important;
}
.form-builder-light .form-builder-images-panel [class*="border-zinc"] {
  border-color: rgb(228 228 231) !important; /* zinc-200 */
}
.form-builder-light .form-builder-images-panel [class*="bg-zinc-50"] {
  background-color: rgb(250 250 250) !important;
}

/* Form builder – Field settings panel & Section container (light mode + accessible contrast) */
.form-builder-light .form-builder-settings .form-builder-settings-title,
.form-builder-light .form-builder-settings .form-builder-settings-label,
.form-builder-light .form-builder-settings label {
  color: rgb(55 65 81) !important; /* gray-700, 7.5:1 on white */
}
.form-builder-light .form-builder-settings .form-builder-settings-icon {
  color: rgb(75 85 99) !important; /* gray-600, 5.7:1 */
}
.form-builder-light .form-builder-settings .form-builder-settings-input,
.form-builder-light .form-builder-settings input:not([type="color"]):not([type="checkbox"]),
.form-builder-light .form-builder-settings textarea,
.form-builder-light .form-builder-settings select {
  background-color: rgb(255 255 255) !important;
  border: 1px solid rgb(209 213 219) !important; /* gray-300 */
  color: rgb(17 24 39) !important; /* gray-900, 16:1 */
}
.form-builder-light .form-builder-settings .form-builder-settings-input::placeholder,
.form-builder-light .form-builder-settings input::placeholder,
.form-builder-light .form-builder-settings textarea::placeholder {
  color: rgb(107 114 128) !important; /* gray-500, 4.6:1 */
}
.form-builder-light .form-builder-settings .form-builder-settings-btn {
  background-color: rgb(255 255 255) !important;
  border-color: rgb(209 213 219) !important;
  color: rgb(55 65 81) !important;
}
.form-builder-light .form-builder-settings .form-builder-settings-btn:hover {
  background-color: rgb(249 250 251) !important;
}
.form-builder-light .form-builder-settings .form-builder-settings-color-swatch-default {
  border-color: rgb(209 213 219) !important;
}
.form-builder-light .form-builder-settings .form-builder-settings-color-swatch-selected {
  border-color: rgb(59 130 246) !important;
  box-shadow: 0 0 0 2px rgb(59 130 246 / 0.3);
}
.form-builder-light .form-builder-settings .form-builder-settings-color-none {
  color: rgb(107 114 128) !important;
}
.form-builder-light .form-builder-settings .form-builder-settings-color-swatch-default:hover {
  border-color: rgb(156 163 175) !important;
}
.form-builder-light .form-builder-settings span.text-zinc-700,
.form-builder-light .form-builder-settings span.text-zinc-600 {
  color: rgb(55 65 81) !important;
}

/* Section container – light mode */
.form-builder-light .form-builder-section-container {
  border: 1px solid rgb(209 213 219) !important;
}
.form-builder-light .form-builder-section-header-default {
  background-color: rgb(249 250 251) !important; /* gray-50 */
  border-color: rgb(229 231 235) !important; /* gray-200 */
}
.form-builder-light .form-builder-section-header-selected {
  background-color: rgb(239 246 255) !important; /* blue-50 */
  border-color: rgb(229 231 235) !important;
}
.form-builder-light .form-builder-section-title {
  color: rgb(17 24 39) !important; /* gray-900 */
}
.form-builder-light .form-builder-section-desc {
  color: rgb(75 85 99) !important; /* gray-600 */
}
.form-builder-light .form-builder-section-icon {
  color: rgb(75 85 99) !important;
}
.form-builder-light .form-builder-section-icon:hover {
  color: rgb(17 24 39) !important;
}
.form-builder-light .form-builder-section-drop-zone-default {
  border-color: rgb(209 213 219) !important;
  background-color: rgb(255 255 255) !important;
}
.form-builder-light .form-builder-section-drop-zone-active {
  border-color: rgb(59 130 246) !important;
  background-color: rgb(239 246 255) !important;
}
.form-builder-light .form-builder-section-drop-zone-text {
  color: rgb(75 85 99) !important; /* gray-600, 5.7:1 */
}

/* Field cards, drop zones & selects in form builder light */
.form-builder-light .form-builder-settings input,
.form-builder-light .form-builder-settings textarea,
.form-builder-light .form-builder-settings select {
  border-color: rgb(209 213 219) !important;
  background-color: rgb(255 255 255) !important;
  color: rgb(17 24 39) !important;
}
.form-builder-light .form-builder-settings [class*="border-zinc"] {
  border-color: rgb(229 231 235) !important;
}
.form-builder-light .form-builder-settings [class*="bg-blue-500"],
.form-builder-light .form-builder-settings [class*="bg-zinc-200"] {
  border-color: rgb(209 213 219) !important;
}
.form-builder-light .form-builder-settings p.text-xs,
.form-builder-light .form-builder-settings p[class*="text-zinc"],
.form-builder-light .form-builder-settings .text-zinc-500,
.form-builder-light .form-builder-settings .text-zinc-600 {
  color: rgb(75 85 99) !important;
}
.form-builder-light .form-builder-settings [class*="bg-zinc-100"] {
  background-color: rgb(243 244 246) !important; /* gray-100 */
  color: rgb(55 65 81) !important;
}
.form-builder-light .form-builder-settings [class*="bg-zinc-100"]:hover {
  background-color: rgb(229 231 235) !important; /* gray-200 */
}
.form-builder-light .form-builder-settings [class*="bg-blue-500/15"] {
  background-color: rgb(239 246 255) !important; /* blue-50 */
  color: rgb(37 99 235) !important; /* blue-600 */
}
.form-builder-light .form-builder-settings [class*="border-zinc-300"] {
  border-color: rgb(209 213 219) !important;
}
.form-builder-light .form-builder-settings-empty-icon {
  color: rgb(156 163 175) !important; /* gray-400 */
}
.form-builder-light .form-builder-settings-empty-text {
  color: rgb(75 85 99) !important; /* gray-600 */
}
