@tailwind base;
@tailwind components;
@tailwind utilities;

/* Accessibility: Smooth scrolling for all and reduced motion support */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
  
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Global focus styles for keyboard navigation */
:focus-visible {
  outline: 2px solid #2563eb; /* blue-600 */
  outline-offset: 2px;
}

/* Ensure buttons and links have proper focus indicators */
button:focus-visible,
a:focus-visible {
  outline: 2px solid #2563eb;
  outline-offset: 2px;
  border-radius: 0.375rem;
}

/* Body styles: Dark mode default but will be overridden by landing page's light mode */
body {
  @apply bg-zinc-950 text-zinc-100;
}

/* Landing page light mode */
body.light-mode {
  @apply bg-white text-gray-900;
}

/* Skip to main content link for keyboard users */
.skip-to-main {
  position: absolute;
  left: -10000px;
  z-index: 999;
  padding: 0.5rem;
}

.skip-to-main:focus {
  position: static;
  left: auto;
  top: auto;
  background-color: #2563eb;
  color: white;
  padding: 0.5rem 1rem;
}

/* Ensure primary touch targets are at minimum 44x44px.
   Only applies to standalone interactive elements, not small inline
   controls (color swatches, icon buttons, etc.) which set their own size. */
input[type="button"],
input[type="submit"],
input[type="reset"] {
  min-height: calc(2.75rem); /* 44px */
}

/* Improve input visibility with better focus states */
input:focus,
textarea:focus,
select:focus {
  outline: none;
}

/* Color contrast improvements — links inherit color by default so Tailwind text classes take full control */
a {
  color: inherit;
}

a:visited {
  color: inherit;
}

/* Leaflet popup overrides — reduce default padding for tighter popups */
.leaflet-popup-content-wrapper {
  padding: 16px !important;
  border-radius: 8px !important;
}

.leaflet-popup-content {
  margin: 0 !important;
  font-size: 13px !important;
  line-height: 1.4 !important;
}

.leaflet-popup-content button {
  min-height: auto !important;
}

.leaflet-popup-tip-container {
  margin-top: -1px;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
  50% { box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.15); }
}

@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink-caret {
  from, to { border-color: transparent; }
  50% { border-color: #2563eb; }
}

/* Custom scrollbar for calendar views */
.calendar-scroll::-webkit-scrollbar {
  width: 6px;
}

.calendar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.calendar-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 3px;
}

.calendar-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

/* Firefox */
.calendar-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
}

@layer components {
  .ui-input {
    @apply w-full px-3.5 py-3.5 text-sm text-gray-900 placeholder:text-gray-400 border border-gray-300 rounded-lg bg-white focus:border-gray-900 focus:ring-1 focus:ring-gray-900/10 outline-none transition-colors disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200;
  }

  .ui-input-bordered {
    @apply w-full px-4 py-3 min-h-[44px] border border-gray-300 rounded-lg text-gray-800 placeholder:text-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition;
  }

  .ui-select {
    @apply w-full px-3.5 py-3.5 pr-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:border-gray-900 focus:ring-1 focus:ring-gray-900/10 outline-none appearance-none bg-no-repeat transition-colors disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%236B7280' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 8 4 4 4-4'/%3E%3C/svg%3E");
    background-size: 16px 16px;
    background-position: right 12px center;
  }

  .ui-icon-muted {
    @apply text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 transition;
  }

  .settings-search-input {
    @apply w-full pl-10 pr-4 py-3 border border-gray-300 text-sm text-gray-900 placeholder:text-gray-400 bg-white rounded-lg focus:border-gray-900 focus:ring-1 focus:ring-gray-900/10 outline-none transition-colors;
  }

  .ui-label {
    @apply block text-sm font-medium text-gray-700 mb-1.5;
  }

  .ui-btn {
    @apply inline-flex items-center justify-center font-semibold rounded-full transition focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .ui-btn-sm {
    @apply ui-btn px-4 py-1.5 min-h-[32px] text-xs;
  }

  .ui-btn-md {
    @apply ui-btn px-5 py-2.5 min-h-[40px] text-sm;
  }

  .ui-btn-lg {
    @apply ui-btn px-6 py-3.5 min-h-[48px] text-sm;
  }

  .ui-btn-primary {
    @apply bg-gray-900 text-white hover:bg-gray-800;
  }

  .ui-btn-secondary {
    @apply text-gray-500 hover:text-gray-700 bg-transparent;
  }

  .ui-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
}