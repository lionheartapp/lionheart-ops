@tailwind base;
@tailwind components;
@tailwind utilities;

/* Accessibility: Smooth scrolling for all and reduced motion support */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
  
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Global focus styles for keyboard navigation */
:focus-visible {
  outline: 2px solid #2563eb; /* blue-600 */
  outline-offset: 2px;
}

/* Ensure buttons and links have proper focus indicators */
button:focus-visible,
a:focus-visible {
  outline: 2px solid #2563eb;
  outline-offset: 2px;
  border-radius: 0.375rem;
}

/* Body styles: Dark mode default but will be overridden by landing page's light mode */
body {
  @apply bg-zinc-950 text-zinc-100;
}

/* Landing page light mode */
body.light-mode {
  @apply bg-white text-gray-900;
}

/* Skip to main content link for keyboard users */
.skip-to-main {
  position: absolute;
  left: -10000px;
  z-index: 999;
  padding: 0.5rem;
}

.skip-to-main:focus {
  position: static;
  left: auto;
  top: auto;
  background-color: #2563eb;
  color: white;
  padding: 0.5rem 1rem;
}

/* Ensure touch targets are at minimum 44x44px */
button,
a[role="button"],
input[type="button"],
input[type="submit"],
input[type="reset"],
input[type="checkbox"],
input[type="radio"] {
  min-height: calc(2.75rem); /* 44px */
}

/* Improve input visibility with better focus states */
input:focus,
textarea:focus,
select:focus {
  outline: none;
}

/* Color contrast improvements — links inherit color by default so Tailwind text classes take full control */
a {
  color: inherit;
}

a:visited {
  color: inherit;
}

/* Leaflet popup overrides — reduce default padding for tighter popups */
.leaflet-popup-content-wrapper {
  padding: 0 !important;
  border-radius: 8px !important;
}

.leaflet-popup-content {
  margin: 16px !important;
  font-size: 13px !important;
  line-height: 1.4 !important;
}

.leaflet-popup-content button {
  min-height: auto !important;
}

.leaflet-popup-tip-container {
  margin-top: -1px;
}

@layer components {
  .ui-input {
    @apply w-full px-4 py-3 min-h-[44px] border border-gray-300 rounded-lg text-gray-800 placeholder:text-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition;
  }

  .ui-select {
    @apply w-full px-4 py-3 pr-12 min-h-[44px] border border-gray-300 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-no-repeat transition;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234B5563' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 8 4 4 4-4'/%3E%3C/svg%3E");
    background-size: 16px 16px;
    background-position: right 16px center;
  }

  .ui-icon-muted {
    @apply text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition;
  }

  .settings-search-input {
    @apply w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-gray-800 placeholder:text-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }
}